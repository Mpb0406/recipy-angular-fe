<form [formGroup]="recipeForm" action="">
  <h1>Create New Recipe</h1>
  <mat-form-field appearance="standard">
    <mat-label>Title*</mat-label>
    <input matInput type="text" formControlName="title" />
  </mat-form-field>
  <mat-form-field appearance="standard">
    <mat-label>Description</mat-label>
    <textarea
      matInput
      placeholder="Ex. 100 Main St"
      formControlName="description"
    ></textarea>
  </mat-form-field>
  <mat-form-field appearance="standard">
    <mat-label>Yield</mat-label>
    <input matInput type="number" formControlName="serves" />
  </mat-form-field>
  <mat-form-field appearance="standard">
    <mat-label>Prep Time</mat-label>
    <input matInput type="number" formControlName="preptime" />
  </mat-form-field>
  <mat-form-field appearance="standard">
    <mat-label>Cook Time</mat-label>
    <input matInput type="number" formControlName="cooktime" />
  </mat-form-field>

  <h3>Add Ingredients</h3>
  <div formArrayName="ingredients">
    <div
      *ngFor="
        let ingredient of recipeForm.controls.ingredients.controls;
        let i = index
      "
    >
      <div [formGroupName]="i">
        <mat-form-field appearance="standard">
          <mat-label>Amt</mat-label>
          <input
            id="ingredient-{{ i }}"
            matInput
            type="number"
            formControlName="amount"
          />
        </mat-form-field>
        <mat-form-field appearance="standard">
          <mat-label>Unit</mat-label>
          <input matInput type="text" formControlName="unit" />
        </mat-form-field>
        <mat-form-field appearance="standard">
          <mat-label>Ingredient</mat-label>
          <input matInput type="text" formControlName="item" />
        </mat-form-field>
        <button (click)="removeIngredient(i)">Delete</button>
      </div>
    </div>
    <button mat-raised-button color="primary" (click)="addIngredient()">
      Add ingredient
    </button>
  </div>

  <h3>Add Steps</h3>
  <div formArrayName="procedures">
    <div
      *ngFor="
        let step of recipeForm.controls.procedures.controls;
        let i = index
      "
    >
      <div [formGroupName]="i">
        <mat-form-field appearance="standard">
          <mat-label>Add Step</mat-label>
          <textarea matInput formControlName="step"></textarea>
        </mat-form-field>
        <button (click)="removeStep(i)">Delete</button>
      </div>
    </div>
    <button mat-raised-button color="primary" (click)="addStep()">
      Add step
    </button>
  </div>

  <button mat-raised-button color="primary">Save</button>

  <p>{{ recipeForm.value | json }}</p>
</form>
